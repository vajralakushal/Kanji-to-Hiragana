(()=>{console.log("Popup script starting");var e=!1,r=!1;document.addEventListener("DOMContentLoaded",(function(){var n=document.getElementById("convertButton"),t=document.getElementById("furiganaButton");n.addEventListener("click",(function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(r){var t=e?"revert":"convert";chrome.tabs.sendMessage(r[0].id,{action:t},(function(r){chrome.runtime.lastError?console.error("Error:",chrome.runtime.lastError.message):(console.log("Response received:",r),e=!e,n.textContent=e?"Convert Hiragana to Kanji":"Convert Kanji to Hiragana")}))}))})),t.addEventListener("click",(function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(e){var n=r?"removeFurigana":"addFurigana";chrome.tabs.sendMessage(e[0].id,{action:n},(function(e){chrome.runtime.lastError?console.error("Error:",chrome.runtime.lastError.message):(console.log("Response received:",e),r=!r,t.textContent=r?"Remove Furigana":"Add Furigana")}))}))}))}))})();